var twig=function(a){var c=a.id;if(a.debug!==void 0)Twig.debug=a.debug;if(a.data!==void 0)return new Twig.Template(a.data,c);else if(a.ref!==void 0){if(a.id!==void 0)throw Error("Both ref and id cannot be set on a twig.js template.");return Twig.Templates.load(a.ref)}else if(a.href!==void 0)return Twig.Templates.loadRemote(a.href,c,a.load,a.async,a.precompiled)};twig.extendFilter=function(a,c){Twig.extendFilter(a,c)};twig.extendTest=function(a,c){Twig.extendFilter(a,c)};twig.extendTag=function(a){Twig.logic.extend(a)};
twig.compile=function(a,c){var b=c.filename,d=Twig.Templates.load(b)||new Twig.Template(a,b);return function(a){return d.render(a)}};
var Twig=function(a){function c(a,c){var e=Object.prototype.toString.call(c).slice(8,-1);return c!==void 0&&c!==null&&e===a}a.trace=false;a.debug=false;a.Error=function(a){this.message=a;this.type=this.name="TwigException"};a.Error.prototype.toString=function(){return this.name+": "+this.message};a.log={trace:function(){a.trace&&console&&console.log(Array.prototype.slice.call(arguments))},debug:function(){a.debug&&console&&console.log(Array.prototype.slice.call(arguments))}};a.token={};a.token.type=
{output:"output",logic:"logic",comment:"comment",raw:"raw"};a.token.definitions={output:{type:a.token.type.output,open:"{{",close:"}}"},logic:{type:a.token.type.logic,open:"{%",close:"%}"},comment:{type:a.token.type.comment,open:"{#",close:"#}"}};a.token.strings=['"',"'"];a.token.findStart=function(b){var c={position:null,def:null},e,f,g;for(e in a.token.definitions)if(a.token.definitions.hasOwnProperty(e)&&(f=a.token.definitions[e],g=b.indexOf(f.open),a.log.trace("Twig.token.findStart: ","Searching for ",
f.open," found at ",g),g>=0&&(c.position===null||g<c.position)))c.position=g,c.def=f;return c};a.token.findEnd=function(b,c,e){for(var f=null,g=false,h=0,i=null,k=null,j=null,l=i=null,i=null,m,n;!g;){k=i=null;j=b.indexOf(c.close,h);if(j>=0)f=j,g=true;else throw new a.Error("Unable to find closing bracket '"+c.close+"' opened near template position "+e);n=a.token.strings.length;for(m=0;m<n;m+=1)if(l=b.indexOf(a.token.strings[m],h),l>0&&l<j&&(i===null||l<i))i=l,k=a.token.strings[m];if(i!==null){i+=
1;f=null;for(g=false;;){i=b.indexOf(k,i);if(i<0)throw"Unclosed string in template";if(b.substr(i-1,1)!=="\\"){h=i+1;break}else i+=1}}}return f};a.tokenize=function(b){for(var c=[],e=0,f=null,g=null;b.length>0;)f=a.token.findStart(b),a.log.trace("Twig.tokenize: ","Found token: ",f),f.position!==null?(f.position>0&&c.push({type:a.token.type.raw,value:b.substring(0,f.position)}),b=b.substr(f.position+f.def.open.length),e+=f.position+f.def.open.length,g=a.token.findEnd(b,f.def,e),a.log.trace("Twig.tokenize: ",
"Token ends at ",g),c.push({type:f.def.type,value:b.substring(0,g).trim()}),b=b.substr(g+f.def.close.length),e+=g+f.def.close.length):(c.push({type:a.token.type.raw,value:b}),b="");return c};a.compile=function(b){for(var c=[],e=[],f=[],g=null,h=g=g=null,i=null,k=h=null,j=null,l=null;b.length>0;){g=b.shift();switch(g.type){case a.token.type.raw:e.length>0?f.push(g):c.push(g);break;case a.token.type.logic:g=a.logic.compile.apply(this,[g]);k=g.type;j=a.logic.handler[k].open;l=a.logic.handler[k].next;
a.log.trace("Twig.compile: ","Compiled logic token to ",g," next is: ",l," open is : ",j);if(j!==void 0&&!j){h=e.pop();i=a.logic.handler[h.type];if(i.next.indexOf(k)<0)throw Error(k+" not expected after a "+h.type);h.output=h.output||[];h.output=h.output.concat(f);f=[];h={type:a.token.type.logic,token:h};e.length>0?f.push(h):c.push(h)}if(l!==void 0&&l.length>0){a.log.trace("Twig.compile: ","Pushing ",g," to logic stack.");if(e.length>0)h=e.pop(),h.output=h.output||[],h.output=h.output.concat(f),e.push(h);
e.push(g)}else j!==void 0&&j&&(h={type:a.token.type.logic,token:g},e.length>0?f.push(h):c.push(h));break;case a.token.type.output:a.expression.compile.apply(this,[g]),e.length>0?f.push(g):c.push(g)}a.log.trace("Twig.compile: "," Output: ",c," Logic Stack: ",e," Pending Output: ",f)}if(e.length>0)throw g=e.pop(),Error("Unable to find an end tag for "+g.type+", expecting one of "+g.next.join(", "));return c};a.parse=function(b,c){var e=[],f=true,c=c||{};b.forEach(function(b){a.log.debug("Twig.parse: ",
"Parsing token: ",b);switch(b.type){case a.token.type.raw:e.push(b.value);break;case a.token.type.logic:b=a.logic.parse.apply(this,[b.token,c,f]);if(b.chain!==void 0)f=b.chain;if(b.context!==void 0)c=b.context;b.output!==void 0&&e.push(b.output);break;case a.token.type.output:e.push(a.expression.parse.apply(this,[b.stack,c]))}});return e.join("")};a.prepare=function(b){a.log.debug("Twig.prepare: ","Tokenizing ",b);b=a.tokenize.apply(this,[b]);a.log.debug("Twig.prepare: ","Compiling ",b);b=a.compile.apply(this,
[b]);a.log.debug("Twig.prepare: ","Compiled ",b);return b};a.Templates={registry:{}};a.Templates.save=function(b){if(b.id===void 0)throw new a.Error("Unable to save template with no id");a.Templates.registry[b.id]=b};a.Templates.load=function(b){return!a.Templates.registry.hasOwnProperty(b)?null:a.Templates.registry[b]};a.Templates.loadRemote=function(b,c,e,f,g){c===void 0&&(c=b);if(a.Templates.registry.hasOwnProperty(c))return a.Templates.registry[c];if(typeof XMLHttpRequest=="undefined")throw Error("Unsupported platform: Unable to do remote requests because there is no XMLHTTPRequest implementation");
var h=new XMLHttpRequest;h.onreadystatechange=function(){var b=null,b=null;h.readyState==4&&(a.log.debug("Got template ",h.responseText),b=g===true?JSON.parse(h.responseText):a.prepare(h.responseText),b=new a.Template(b,c),e&&e(b))};h.open("GET",b,f===true);h.send()};a.Template=function(b,d){this.tokens=c("String",b)?a.prepare.apply(this,[b]):b;this.id=d;this.render=function(b){return a.parse.apply(this,[this.tokens,b])};d!==void 0&&a.Templates.save(this)};return a}(Twig||{});
(function(){if(!Array.prototype.indexOf)Array.prototype.indexOf=function(a){if(this===void 0||this===null)throw new TypeError;var c=Object(this),b=c.length>>>0;if(b===0)return-1;var d=0;arguments.length>0&&(d=Number(arguments[1]),d!==d?d=0:d!==0&&d!==Infinity&&d!==-Infinity&&(d=(d>0||-1)*Math.floor(Math.abs(d))));if(d>=b)return-1;for(d=d>=0?d:Math.max(b-Math.abs(d),0);d<b;d++)if(d in c&&c[d]===a)return d;return-1};if(!Array.prototype.forEach)Array.prototype.forEach=function(a,c){var b,d;if(this==
null)throw new TypeError(" this is null or not defined");var e=Object(this),f=e.length>>>0;if({}.toString.call(a)!="[object Function]")throw new TypeError(a+" is not a function");c&&(b=c);for(d=0;d<f;){var g;d in e&&(g=e[d],a.call(b,g,d,e));d++}};if(!Object.keys)Object.keys=function(a){if(a!==Object(a))throw new TypeError("Object.keys called on non-object");var c=[],b;for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&c.push(b);return c}})();
Twig=function(a){a.logic={};a.logic.type={if_:"Twig.logic.type.if",endif:"Twig.logic.type.endif",for_:"Twig.logic.type.for",endfor:"Twig.logic.type.endfor",else_:"Twig.logic.type.else",elseif:"Twig.logic.type.elseif",set:"Twig.logic.type.set",filter:"Twig.logic.type.filter",endfilter:"Twig.logic.type.endfilter"};a.logic.definitions=[{type:a.logic.type.if_,regex:/^if\s+([^\s].+)$/,next:[a.logic.type.else_,a.logic.type.elseif,a.logic.type.endif],open:true,compile:function(c){c.stack=a.expression.compile.apply(this,
[{type:a.expression.type.expression,value:c.match[1]}]).stack;delete c.match;return c},parse:function(c,b,d){var e="",f=a.expression.parse.apply(this,[c.stack,b]),d=true;f===true&&(d=false,e=a.parse.apply(this,[c.output,b]));return{chain:d,output:e}}},{type:a.logic.type.elseif,regex:/^elseif\s+([^\s].*)$/,next:[a.logic.type.else_,a.logic.type.endif],open:false,compile:function(c){c.stack=a.expression.compile.apply(this,[{type:a.expression.type.expression,value:c.match[1]}]).stack;delete c.match;return c},
parse:function(c,b,d){var e="";d&&a.expression.parse.apply(this,[c.stack,b])===true&&(d=false,e=a.parse.apply(this,[c.output,b]));return{chain:d,output:e}}},{type:a.logic.type.else_,regex:/^else$/,next:[a.logic.type.endif,a.logic.type.endfor],open:false,parse:function(c,b,d){var e="";d&&(e=a.parse.apply(this,[c.output,b]));return{chain:d,output:e}}},{type:a.logic.type.endif,regex:/^endif$/,next:[],open:false},{type:a.logic.type.for_,regex:/^for\s+([a-zA-Z0-9_,\s]+)\s+in\s+([^\s].+)$/,next:[a.logic.type.else_,
a.logic.type.endfor],open:true,compile:function(c){var b=c.match[1],d=c.match[2],e=null,e=null;c.key_var=null;c.value_var=null;if(b.indexOf(",")>=0)if(e=b.split(","),e.length===2)c.key_var=e[0].trim(),c.value_var=e[1].trim();else throw new a.Error("Invalid expression in for loop: "+b);else c.value_var=b;e=a.expression.compile.apply(this,[{type:a.expression.type.expression,value:d}]).stack;c.expression=e;delete c.match;return c},parse:function(c,b,d){var e=a.expression.parse.apply(this,[c.expression,
b]),f=[],g;e instanceof Array?(g=0,e.forEach(function(d){b[c.value_var]=d;c.key_var&&(b[c.key_var]=g);f.push(a.parse.apply(this,[c.output,b]));g+=1})):e instanceof Object&&(d=e._keys!==void 0?e._keys:Object.keys(e),d.forEach(function(d){d!=="_keys"&&e.hasOwnProperty(d)&&(b[c.value_var]=e[d],c.key_var&&(b[c.key_var]=d),f.push(a.parse.apply(this,[c.output,b])))}));d=f.length===0;return{chain:d,output:f.join("")}}},{type:a.logic.type.endfor,regex:/^endfor$/,next:[],open:false},{type:a.logic.type.set,
regex:/^set\s+([a-zA-Z0-9_,\s]+)\s*=\s*(.+)$/,next:[],open:true,compile:function(c){var b=c.match[1].trim(),d=a.expression.compile.apply(this,[{type:a.expression.type.expression,value:c.match[2]}]).stack;c.key=b;c.expression=d;delete c.match;return c},parse:function(c,b,d){var e=a.expression.parse.apply(this,[c.expression,b]);b[c.key]=e;return{chain:d,context:b}}},{type:a.logic.type.filter,regex:/^filter\s+(.+)$/,next:[a.logic.type.endfilter],open:true,compile:function(c){var b="|"+c.match[1].trim();
c.stack=a.expression.compile.apply(this,[{type:a.expression.type.expression,value:b}]).stack;delete c.match;return c},parse:function(c,b,d){var e=a.parse.apply(this,[c.output,b]),c=[{type:a.expression.type.string,value:e}].concat(c.stack),b=a.expression.parse.apply(this,[c,b]);return{chain:d,output:b}}},{type:a.logic.type.endfilter,regex:/^endfilter$/,next:[],open:false}];a.logic.handler={};a.logic.extendType=function(c,b){a.logic.type[c]=b||"Twig.logic.type"+c};for(a.logic.extend=function(c){if(!c.type)throw new a.Error("Unable to extend logic definition. No type provided for "+
c);if(a.logic.type[c.type])throw new a.Error("Unable to extend logic definitions. Type "+c.type+" is already defined.");else a.logic.extendType(c.type);a.logic.handler[c.type]=c};a.logic.definitions.length>0;)a.logic.extend(a.logic.definitions.shift());a.logic.compile=function(c){var c=c.value.trim(),c=a.logic.tokenize(c),b=a.logic.handler[c.type];b.compile&&(c=b.compile(c),a.log.trace("Twig.logic.compile: ","Compiled logic token to ",c));return c};a.logic.tokenize=function(c){var b={},d=null,e=null,
f=null,g=null,f=f=null,c=c.trim();for(d in a.logic.handler)if(a.logic.handler.hasOwnProperty(d)){e=a.logic.handler[d].type;f=a.logic.handler[d].regex;g=[];for(f instanceof Array?g=f:g.push(f);g.length>0;)if(f=g.shift(),f=f.exec(c.trim()),f!==null)return b.type=e,b.match=f,a.log.trace("Twig.logic.tokenize: ","Matched a ",e," regular expression of ",f),b}throw new a.Error("Unable to parse '"+c.trim()+"'");};a.logic.parse=function(c,b,d){var e="",f,b=b||{};a.log.debug("Twig.logic.parse: ","Parsing logic token ",
c);f=a.logic.handler[c.type];f.parse&&(e=f.parse(c,b,d));return e};return a}(Twig||{});
Twig=function(a){a.expression={};a.expression.type={comma:"Twig.expression.type.comma",expression:"Twig.expression.type.expression",operator:"Twig.expression.type.operator",string:"Twig.expression.type.string",array:{start:"Twig.expression.type.array.start",end:"Twig.expression.type.array.end"},object:{start:"Twig.expression.type.object.start",end:"Twig.expression.type.object.end"},parameter:{start:"Twig.expression.type.parameter.start",end:"Twig.expression.type.parameter.end"},key:{period:"Twig.expression.type.key.period",
brackets:"Twig.expression.type.key.brackets"},filter:"Twig.expression.type.filter",variable:"Twig.expression.type.variable",number:"Twig.expression.type.number",setkey:"Twig.expression.type.setkey",test:"Twig.expression.type.test"};a.expression.set={operations:[a.expression.type.filter,a.expression.type.operator,a.expression.type.array.end,a.expression.type.object.end,a.expression.type.parameter.end,a.expression.type.comma,a.expression.type.setkey,a.expression.type.test],expressions:[a.expression.type.expression,
a.expression.type.string,a.expression.type.variable,a.expression.type.number,a.expression.type.array.start,a.expression.type.object.start]};a.expression.fn={compile:{push:function(a,b,d){d.push(a)}},parse:{push:function(a,b){b.push(a)},push_value:function(a,b){b.push(a.value)}}};a.expression.definitions=[{type:a.expression.type.test,regex:/^is\s+(not)?\s*([a-zA-Z_][a-zA-Z0-9_]*)/,next:a.expression.set.operations.concat([a.expression.type.parameter.start]),compile:function(a,b,d){a.filter=a.match[2];
a.modifier=a.match[1];delete a.match;delete a.value;d.push(a)},parse:function(c,b,d){var e=b.pop(),d=c.params&&a.expression.parse.apply(this,[c.params,d]),e=a.test(c.filter,e,d);c.modifier=="not"?b.push(!e):b.push(e)}},{type:a.expression.type.setkey,regex:/^\:/,next:a.expression.set.expressions,compile:function(c,b,d){b=d.pop();if(b.type!==a.expression.type.string)throw new a.Error("Unexpected object key: "+b);c.key=b.value;d.push(c)},parse:a.expression.fn.parse.push},{type:a.expression.type.comma,
regex:/^,/,next:a.expression.set.expressions,compile:function(a,b,d){for(;b.length>0;)d.push(b.pop());d.push(a)}},{type:a.expression.type.expression,regex:/^\(([^\)]+)\)/,next:a.expression.set.operations,compile:function(c,b,d){c.value=c.match[1];for(c=a.expression.compile(c).stack;c.length>0;)d.push(c.shift())}},{type:a.expression.type.operator,regex:/(^[\+\*\/\-\^~%]|^[<>!]=?|^==|^\|\||^&&)/,next:a.expression.set.expressions,compile:function(c,b,d){c=a.expression.operator.lookup(c.value,c);for(a.log.trace("Twig.expression.compile: ",
"Operator: ",c);b.length>0&&(c.associativity===a.expression.operator.leftToRight&&c.precidence>=b[b.length-1].precidence||c.associativity===a.expression.operator.rightToLeft&&c.precidence>b[b.length-1].precidence);)d.push(b.pop());b.push(c)},parse:function(c,b){a.expression.operator.parse(c.value,b)}},{type:a.expression.type.string,regex:/^(["'])(?:(?=(\\?))\2.)*?\1/,next:a.expression.set.operations,compile:function(c,b,d){b=c.value;b=b.substring(0,1)==='"'?b.replace('\\"','"'):b.replace("\\'","'");
c.value=b.substring(1,b.length-1);a.log.trace("Twig.expression.compile: ","String value: ",c.value);d.push(c)},parse:a.expression.fn.parse.push_value},{type:a.expression.type.parameter.start,regex:/^\(/,next:a.expression.set.expressions.concat([a.expression.type.parameter.end]),compile:a.expression.fn.compile.push,parse:a.expression.fn.parse.push},{type:a.expression.type.parameter.end,regex:/^\)/,next:a.expression.set.operations,compile:function(c,b,d){for(;b.length>0;)d.push(b.pop());for(b=[];c.type!==
a.expression.type.parameter.start;)b.unshift(c),c=d.pop();b.unshift(c);c=d.pop();if(c.type!==a.expression.type.filter&&c.type!==a.expression.type.test)throw new a.Error("Expected filter before parameters, got "+c.type);c.params=b;d.push(c)},parse:function(c,b){for(var d=[],e=false,f=null;b.length>0;){f=b.pop();if(f.type&&f.type==a.expression.type.parameter.start){e=true;break}d.unshift(f)}if(!e)throw new a.Error("Expected end of parameter set.");b.push(d)}},{type:a.expression.type.array.start,regex:/^\[/,
next:a.expression.set.expressions.concat([a.expression.type.array.end]),compile:a.expression.fn.compile.push,parse:a.expression.fn.parse.push},{type:a.expression.type.array.end,regex:/^\]/,next:a.expression.set.operations.concat([a.expression.type.key.period,a.expression.type.key.brackets]),compile:function(a,b,d){for(;b.length>0;)d.push(b.pop());d.push(a)},parse:function(c,b){for(var d=[],e=false,f=null;b.length>0;){f=b.pop();if(f.type&&f.type==a.expression.type.array.start){e=true;break}d.unshift(f)}if(!e)throw new a.Error("Expected end of array.");
b.push(d)}},{type:a.expression.type.object.start,regex:/^\{/,next:a.expression.set.expressions.concat([a.expression.type.object.end]),compile:a.expression.fn.compile.push,parse:a.expression.fn.parse.push},{type:a.expression.type.object.end,regex:/^\}/,next:a.expression.set.operations.concat([a.expression.type.key.period,a.expression.type.key.brackets]),compile:function(a,b,d){for(;b.length>0;)d.push(b.pop());d.push(a)},parse:function(c,b){for(var d={},e=false,f=null,g=null;b.length>0;){f=b.pop();
if(f.type&&f.type===a.expression.type.object.start){e=true;break}if(f.type&&f.type===a.expression.type.setkey){if(g===null)throw new a.Error("Expected value for key "+f.key+" in object definition. Got "+f);d[f.key]=g;if(d._keys===void 0)d._keys=[];d._keys.unshift(f.key);g=null}else g=f}if(!e)throw new a.Error("Unexpected end of object.");b.push(d)}},{type:a.expression.type.filter,regex:/^\|[a-zA-Z_][a-zA-Z0-9_\-]*/,next:a.expression.set.operations.concat([a.expression.type.key.period,a.expression.type.key.brackets,
a.expression.type.parameter.start]),compile:function(a,b,d){a.value=a.value.substr(1);d.push(a)},parse:function(c,b,d){var e=b.pop(),d=c.params&&a.expression.parse.apply(this,[c.params,d]);b.push(a.filter(c.value,e,d))}},{type:a.expression.type.variable,regex:/^[a-zA-Z_][a-zA-Z0-9_]*/,next:a.expression.set.operations.concat([a.expression.type.key.period,a.expression.type.key.brackets]),compile:a.expression.fn.compile.push,parse:function(c,b,d){c=a.expression.resolve(c.value,d);b.push(c)}},{type:a.expression.type.key.period,
regex:/^\.([a-zA-Z_][a-zA-Z0-9_]*)/,next:a.expression.set.operations.concat([a.expression.type.key.period,a.expression.type.key.brackets]),compile:function(a,b,d){a.key=a.match[1];delete a.match;delete a.value;d.push(a)},parse:function(c,b){var d=c.key,e=b.pop();if(e===null||e===void 0)throw new a.Error("Can't access a key "+d+" on an undefined object.");b.push(e[d])}},{type:a.expression.type.key.brackets,regex:/^\[([^\]]*)\]/,next:a.expression.set.operations.concat([a.expression.type.key.period,
a.expression.type.key.brackets]),compile:function(c,b,d){b=c.match[1];delete c.value;delete c.match;c.stack=a.expression.compile({value:b}).stack;d.push(c)},parse:function(c,b,d){c=a.expression.parse.apply(this,[c.stack,d]);d=b.pop();if(!d.hasOwnProperty(c))throw new a.Error("Model doesn't provide the key "+c);b.push(d[c])}},{type:a.expression.type.number,regex:/^\-?\d*\.?\d+/,next:a.expression.set.operations,compile:a.expression.fn.compile.push,parse:a.expression.fn.parse.push_value}];a.expression.resolve=
function(a,b){var d=b[a];return typeof d=="function"?d.apply(b,[b]):d};a.expression.handler={};a.expression.extendType=function(c){a.expression.type[c]="Twig.expression.type."+c};for(a.expression.extend=function(c){if(!c.type)throw new a.Error("Unable to extend logic definition. No type provided for "+c);a.expression.handler[c.type]=c};a.expression.definitions.length>0;)a.expression.extend(a.expression.definitions.shift());a.expression.tokenize=function(c){var b=[],d=0,e=null,f,g,h,i,k,j=[],l;l=function(){var c=
Array.prototype.slice.apply(arguments);c.pop();c.pop();a.log.trace("Twig.expression.tokenize","Matched a ",f," regular expression of ",c);if(e&&e.indexOf(f)<0)return j.push(f+" cannot follow a "+b[b.length-1].type+" at template:"+d+" near '"+c[0].substring(0,20)+"...'"),c[0];j=[];b.push({type:f,value:c[0],match:c});k=true;e=i;d+=c[0].length;return""};for(a.log.debug("Twig.expression.tokenize","Tokenizing expression ",c);c.length>0;){c=c.trim();for(f in a.expression.handler)if(a.expression.handler.hasOwnProperty(f)){i=
a.expression.handler[f].next;g=a.expression.handler[f].regex;a.log.trace("Checking type ",f," on ",c);h=g instanceof Array?g:[g];for(k=false;h.length>0;)g=h.pop(),c=c.replace(g,l);if(k)break}if(!k)if(j.length>0)throw new a.Error(j.join(" OR "));else throw new a.Error("Unable to parse '"+c+"' at template position"+d);}a.log.trace("Twig.expression.tokenize","Tokenized to ",b);return b};a.expression.compile=function(c){var b=c.value,d=a.expression.tokenize(b),e=null,f=[],g=[],h=null;a.log.trace("Twig.expression.compile: ",
"Compiling ",b);for(a.log.trace("Twig.expression.compile: ","Tokens tokenized to ",d);d.length>0;)e=d.shift(),h=a.expression.handler[e.type],h.compile&&h.compile(e,g,f);for(;g.length>0;)f.push(g.pop());a.log.trace("Twig.expression.compile: ","Stack is",f);c.stack=f;delete c.value;return c};a.expression.parse=function(c,b){c instanceof Array||(c=[c]);var d=[],e=null;c.forEach(function(c){e=a.expression.handler[c.type];e.parse&&e.parse.apply(this,[c,d,b])});return d.pop()};return a}(Twig||{});
Twig=function(a){a.expression.operator={leftToRight:"leftToRight",rightToLeft:"rightToLeft"};a.expression.operator.lookup=function(c,b){switch(c){case ",":b.precidence=18;b.associativity=a.expression.operator.leftToRight;break;case "?":case ":":b.precidence=16;b.associativity=a.expression.operator.rightToLeft;break;case "||":b.precidence=14;b.associativity=a.expression.operator.leftToRight;break;case "&&":b.precidence=13;b.associativity=a.expression.operator.leftToRight;break;case "==":case "!=":b.precidence=
9;b.associativity=a.expression.operator.leftToRight;break;case "<":case "<=":case ">":case ">=":b.precidence=8;b.associativity=a.expression.operator.leftToRight;break;case "~":case "+":case "-":b.precidence=6;b.associativity=a.expression.operator.leftToRight;break;case "*":case "/":case "%":b.precidence=5;b.associativity=a.expression.operator.leftToRight;break;case "!":b.precidence=3;b.associativity=a.expression.operator.rightToLeft;break;default:throw new a.Error(c+" is an unknown operator.");}b.operator=
c;return b};a.expression.operator.parse=function(c,b){a.log.trace("Twig.expression.operator.parse: ","Handling ",c);var d,e;switch(c){case "+":e=parseFloat(b.pop());d=parseFloat(b.pop());b.push(d+e);break;case "-":e=parseFloat(b.pop());d=parseFloat(b.pop());b.push(d-e);break;case "*":e=parseFloat(b.pop());d=parseFloat(b.pop());b.push(d*e);break;case "/":e=parseFloat(b.pop());d=parseFloat(b.pop());b.push(d/e);break;case "%":e=parseFloat(b.pop());d=parseFloat(b.pop());b.push(d%e);break;case "~":e=b.pop().toString();
d=b.pop().toString();b.push(d+e);break;case "!":b.push(!b.pop());break;case "<":e=b.pop();d=b.pop();b.push(d<e);break;case "<=":e=b.pop();d=b.pop();b.push(d<=e);break;case ">":e=b.pop();d=b.pop();b.push(d>e);break;case ">=":e=b.pop();d=b.pop();b.push(d>=e);break;case "==":e=b.pop();d=b.pop();b.push(d==e);break;case "!=":e=b.pop();d=b.pop();b.push(d!=e);break;case "||":e=b.pop();d=b.pop();b.push(d||e);break;case "&&":e=b.pop(),d=b.pop(),b.push(d&&e)}};return a}(Twig||{});
Twig=function(a){function c(a,c){var e=Object.prototype.toString.call(c).slice(8,-1);return c!==void 0&&c!==null&&e===a}a.filters={upper:function(a){return a.toUpperCase()},lower:function(a){return a.toLowerCase()},capitalize:function(a){return a.substr(0,1).toUpperCase()+a.substr(1)},title:function(a){return a.replace(/(^|\s)([a-z])/g,function(a,b,c){return b+c.toUpperCase()})},length:function(a){if(a instanceof Array||typeof a==="string")return a.length;else if(a instanceof Object)return a._keys===
void 0?Object.keys(a).length:a._keys.length},reverse:function(a){if(c("Array",a))return a.reverse();else if(c("String",a))return a.split("").reverse().join("");else{var d=a._keys||Object.keys(a).reverse();a._keys=d;return a}},sort:function(a){if(c("Array",a))return a.sort();else if(a instanceof Object){var d=Object.keys(a).sort(function(c,d){return a[c]>a[d]});d.forEach(function(){});a._keys=d;return a}},keys:function(a){var c=[];(a._keys||Object.keys(a)).forEach(function(e){e!=="_keys"&&a.hasOwnProperty(e)&&
c.push(e)});return c},url_encode:function(a){return encodeURIComponent(a)},join:function(a,c){var e="",f=[],g=null;c&&c[0]&&(e=c[0]);a instanceof Array?f=a:(g=a._keys||Object.keys(a),g.forEach(function(c){c!=="_keys"&&a.hasOwnProperty(c)&&f.push(a[c])}));return f.join(e)},"default":function(b,c){if(c===void 0||c.length!==1)throw new a.Error("default filter expects one argument");return b===void 0||b===null||b===""?c[0]:b},json_encode:function(a){delete a._keys;return JSON.stringify(a)},merge:function(b,
c){var e=[],f=0,g=[];b instanceof Array?c.forEach(function(a){a instanceof Array||(e={})}):e={};if(!(e instanceof Array))e._keys=[];b instanceof Array?b.forEach(function(a){e._keys&&e._keys.unshift(f);e[f]=a;f++}):(g=b._keys||Object.keys(b),g.forEach(function(a){e[a]=b[a];e._keys.push(a);a=parseInt(a,10);!isNaN(a)&&a>=f&&(f=a+1)}));c.forEach(function(a){a instanceof Array?a.forEach(function(a){e._keys&&e._keys.push(f);e[f]=a;f++}):(g=a._keys||Object.keys(a),g.forEach(function(b){e[b]||e._keys.unshift(b);
e[b]=a[b];b=parseInt(b,10);!isNaN(b)&&b>=f&&(f=b+1)}))});if(c.length===0)throw new a.Error("Filter merge expects at least one parameter");return e}};a.filter=function(b,c,e){if(!a.filters[b])throw"Unable to find filter "+b;return a.filters[b](c,e)};a.extendFilter=function(b,c){a.filters[b]=c};return a}(Twig||{});
Twig=function(a){a.tests={empty:function(a){if(a===null||a===void 0)return true;if(a.length&&a.length>0)return false;for(var b in a)if(a.hasOwnProperty(b))return false;return true},odd:function(a){return a%2===1},even:function(a){return a%2===0},divisibleby:function(a,b){return a%b[0]===0},defined:function(a){return a!==void 0},none:function(a){return a===null}};a.test=function(c,b,d){if(!a.tests[c])throw"Test "+c+" is not defined.";return a.tests[c](b,d)};a.extendTest=function(c,b){a.tests[c]=b};
return a}(Twig||{});typeof module!=="undefined"&&module.exports?module.exports=twig:window.twig=twig;
